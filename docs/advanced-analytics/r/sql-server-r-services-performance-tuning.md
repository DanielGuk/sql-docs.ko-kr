---
title: "SQL Server R Services 성능 조정 | Microsoft 문서"
ms.custom: 
ms.date: 07/12/2017
ms.reviewer: 
ms.suite: sql
ms.prod: machine-learning-services
ms.prod_service: machine-learning-services
ms.component: r
ms.technology: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: cf6f3b7d-f9f9-4e45-b0d1-07850b53e0c5
caps.latest.revision: "20"
author: jeannt
ms.author: jeannt
manager: cgronlund
ms.workload: Inactive
ms.openlocfilehash: 1a38808a619a658bed6cef12d20b52e1f98ad429
ms.sourcegitcommit: 9e6a029456f4a8daddb396bc45d7874a43a47b45
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/25/2018
---
# <a name="performance-tuning-for-r-in-sql-server"></a>SQL Server의 R에 대 한 성능 조정

이 문서는 두 개의 사례에 따라 R 서비스에 대 한 성능 최적화를 설명 하는 4 문서 시리즈의 첫 번째:

- R 솔루션의 성능 프로필 유효성을 검사 하려면 제품 개발 팀에서 수행 하는 성능 테스트

- 고객이 요청한 종종 특정 기계 학습 시나리오에 대 한 Microsoft 데이터 과학 팀에서 성능 최적화.

이 시리즈의 목표는 유형의 성능 튜닝 SQL Server의 R 작업을 실행 하는 데 가장 유용한 기술에 대 한 지침을 제공 하는 것입니다.

+ 데이터 과학 작업에 대 한 최적화 하는 경우 (첫 번째)이 항목의 아키텍처 및 몇 가지 일반적인 문제에 대 한 개요를 제공 합니다.
+ 두 번째 문서에서는 특정 하드웨어와 SQL Server 최적화에 설명 합니다.
+ 세 번째 문서에서는 R 코드와 리소스를 해결해줍니다에서 최적화에 설명 합니다.
+ 네 번째 문서 detail 및 보고서 결과 및 결론에 테스트 메서드를 설명합니다.

**적용 대상:** SQL Server 2016 R Services, SQL Server 2017 기계 학습 서비스

## <a name="performance-goals-and-targeted-scenarios"></a>성능 목표 및 대상된 시나리오

R 서비스 기능은 SQL Server에서 R 스크립트의 실행을 지원 하기 위해 SQL Server 2016에 도입 되었습니다. 이 기능을 사용 하면 R 런타임을 데이터베이스 엔진과에서 별도 프로세스에서 작동 하지만 신뢰할 수 있는 실행 패드 같은 SQL Server와 서버 리소스와 상호 작용 하는 서비스를 사용 하 여 데이터베이스 엔진에서 데이터를 안전 하 게 교환 합니다.

SQL Server 2017 년 1에서 나중에 따라 추가 언어와 동일한 아키텍처를 사용 하 여 Python 스크립트 실행에 대 한 지원 발표 되었습니다.

지원 되는 버전 및 언어의 수까지 확장 되면서 중단 되어 데이터베이스 관리자와 데이터베이스 설계자의 학습 작업에 시스템 리소스 경합에 대 한 잠재적인 인식 되는지를 지원 하도록 서버를 구성할 수는 새 워크 로드 합니다. 분석 데이터에 가까이 유지은 안전 하지 않은 데이터 이동을 제거 하지만 노트북 데이터 과학자 및 데이터를 호스팅하는 서버에 다시 off 분석 워크 로드를 이동 합니다.

기계 학습에 대 한 성능 최적화 작업은 하지 만능 제안 합니다. 다음과 같은 일반적인 작업은 매우 다양 한 성능 프로필 있을 수 있습니다.

- 작업을 교육: 만들기 및 신경망 학습 및 회귀 모델 학습
- T-SQL을 사용 하 여 기능 추출 및 R을 사용 하 여 기능 엔지니어링
- 단일 행 또는 테이블 형식 입력을 사용 하 여 점수 매기기 대량 비교 작은 규모로 일괄 처리 점수 매기기
- R에서 SQL Server에서 저장된 프로시저에서 프로덕션으로 모델을 배포 및 점수 매기기 실행
- 데이터 전송을 최소화 하거나 비용이 많이 드는 데이터 변환을 제거 하는 R 코드를 수정 합니다.
- 자동화 된 테스트와 모델의 재교육를 사용 하도록 설정

응용 프로그램이 나 사용 사례에 대 한 중요 한 작업에 따라 최적화 기술 선택, 때문에 사례 연구는 일반적인 성능 팁 및 특정 시나리오에서는 일괄 처리 점수 매기기에 대 한 최적화에 대 한 최적화 하는 방법에 대 한 지침을 모두 설명 합니다.

+ **SQL Server에서 개별 최적화 옵션**

    첫 번째 성능 사례 연구 단일 유형의 모델을 사용 하 여 단일 데이터 집합에 여러 개의 테스트가 실행 되었습니다. RevoscaleR에 rxLinMod 알고리즘이 모델을 작성 하 고, 점수를 만들기에 사용 된 하지만 각 변경의 영향을 테스트 하 여 코드 뿐만 아니라 기본 데이터 테이블 체계적으로 변경 된 합니다.

    예를 들어 하나의 테스트 실행, 한 R 코드 비교 기능을 미리 계산 하 고 다음 테이블에서 기능을 로드 및 변환 함수를 사용 하 여 기능 엔지니어링 간에 설정 될 수 있도록 변경 되었습니다. 다른 테스트를 실행할 표에 다양 한 유형의 압축 또는 새 인덱스 유형에는 표준 인덱싱된 테이블 데이터와 비교 하 여 모델 학습 성능을 비교 했습니다.

+ **특정 대량 점수 매기기 시나리오에 대 한 최적화**

    두 번째 사례 연구에서는 기계 학습 작업 여러 위치에 대 한 전송 되 고 각 작업 위치에 대 한 적합 한 후보를 찾기 많은 이력서를 처리 하는 작업이 포함 됩니다. 기계 학습 모델 자체를 작성 하는 이진 분류 문제도:를 입력으로 다시 시작 및 작업 설명을 사용 하 고 각 작업 다시 시작 쌍에 대 한 확률을 생성 합니다. 최상의 일치를 찾으려고 목표 이기 때문에 사용자 정의 확률 임계값 추가로 필터링 하 고 방금 좋은 일치 항목을 가져올 하기 위해 사용 됩니다.

    이 솔루션에 대 한 기본 목표 평가 하는 동안 짧은 대기 시간을 달성 하는 것 이었습니다. 그러나이 작업은 각 새 작업 수백만 적절 한 시간 프레임 내에서 다시 시작에 대해 일치 해야 하기 때문에 점수 매기기 프로세스 중에 계산 과정이 필요 합니다. 또한 기능 엔지니어링 단계는 2000 개 기능 resume 또는 작업을 생성 하 고 심각한 성능 병목 합니다.

솔루션에 적용 되는 방법을 확인 하려면 첫 번째 사례 연구에서 모든 결과 검토 하 고 있는 영향을 평가 하는 것이 좋습니다.

그런 다음 작성자는 다양 한 기술을 적용 하 고 특정 작업을 지원 하도록 서버에 최적화 된 하는 방법을 보려면 점수 매기기 최적화 사례 연구의 결과 검토 합니다.

## <a name="performance-optimization-process"></a>성능 최적화 프로세스

구성 및 성능 튜닝에 특정 작업에 대해 설계 계층 최적화를 단색 자료를 만드는 필요 합니다.

- 호스트 분석에 적절 한 서버를 선택 합니다. 일반적으로 보조 보고, 데이터 웨어하우스 또는 이미 다른 보고 또는 분석에 사용 되는 다른 서버는 것이 좋습니다. 그러나 하이브리드 분석 트랜잭션 처리 (HTAP) 솔루션에 운영 데이터 사용할 수 R에 대 한 입력으로 빠른 점수 매기기에 대 한 합니다.

- Python 스크립트 실행에 적절 한 수준에서 또는 분산 데이터베이스 엔진 작업과 R 변수에 SQL Server 인스턴스를 구성 합니다. 여기에 메모리 및 CPU 사용량, NUMA 및 프로세서 선호도 설정 및 리소스 그룹의 생성에 대 한 SQL Server 기본값을 변경 합니다.이 포함 됩니다.

- 외부 스크립트의 효율적인 사용을 지원 하도록 서버 컴퓨터를 최적화 합니다. 패키지 관리를 사용 하도록 설정 하는 외부 스크립트 실행에 사용 된 계정 수를 늘리면 설명에 포함할 수와 관련 된 보안 역할에 사용자를 할당 합니다.

- 데이터 저장 및 전송에 SQL Server, 인덱싱 포함 하 여 및 통계, 쿼리 디자인 및 쿼리를 최적화 전략과 기계 학습에 사용 되는 테이블의 디자인에 특정 최적화를 적용 합니다. 데이터 원본을 분석할 수 있습니다 및 데이터 전송 메서드 또는 추출 기능을 최적화 하기 위해 ETL 프로세스를 수정 합니다.

- 비효율성을 방지 하기 위해 분석 모델을 조정 합니다. 가능한 최적화의 범위는 R 코드 및 패키지와 사용 중인 데이터의 복잡성에 따라 달라 집니다. 키 작업 비용이 많이 드는 데이터 변환을 제거 하거나 데이터 준비 작업이 나 기능 엔지니어링 작업을 오프 로딩 Python 또는 R에서 SQL 또는 ETL 프로세스에 포함 됩니다. 있습니다 수 또한 스크립트 리팩터링, 인라인 패키지 설치를 제거, R 코드, 점수 매기기, 학습과 평가 대 한 별도 절차 나누거나 저장 프로시저로 보다 효율적으로 작동 하도록 코드를 단순화 합니다.

## <a name="articles-in-this-series"></a>이 시리즈의 기사

+ [SQL Server-하드웨어에에서 R에 대 한 성능 조정](..\r\sql-server-configuration-r-services.md)

    하드웨어 구성에 대 한 지침을 제공 하는 [!INCLUDE [ssNoVersion_md](..\..\includes\ssnoversion-md.md)] 가에 설치 되어, 외부 스크립트를 더 잘 지원 하기 위해 SQL Server 인스턴스를 구성 합니다. 에 특히 유용 **데이터베이스 관리자**합니다.

+ [SQL Server-코드 및 데이터에에서 R에 대 한 성능 조정 최적화](..\r\r-and-data-optimization-r-services.md)

    알려진된 문제를 방지 하려면 외부 스크립트를 최적화 하는 방법에 대 한 특정 팁을 제공 합니다. 더욱 편리 하 게 **데이터 과학자**합니다.

    [!NOTE]
    > 대부분의이 섹션의 정보에 적용 되지만 R 일반적, 일부 정보는 RevoScaleR 분석 기능을 합니다. 자세한 성능 지침을 사용할 수 없으면 **revoscalepy** 다른 Python 라이브러리를 지원 합니다.

+ [SQL Server-메서드 및 결과에 R에 대 한 성능 조정](..\r\performance-case-study-r-services.md)

    요약 데이터 사용한 두 사례 연구, 성능 테스트 방법 및 최적화 결과 미치는 영향입니다.
